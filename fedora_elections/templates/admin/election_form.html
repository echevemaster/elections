{% extends "base.html" %}
{% from "_formhelpers.html" import render_field_in_row %}
{% block title %}{{ submit_text }}{% endblock %}
{% block body %}
  <h2>{{ self.title() }}</h2>

  <form action="" method="post">
    <fieldset>
      <table>
        {{ render_field_in_row(form.summary) }}
        {{ render_field_in_row(form.alias) }}
        {{ render_field_in_row(form.description) }}
        {{ render_field_in_row(form.voting_type) }}
        {{ render_field_in_row(form.url) }}
        {{ render_field_in_row(form.start_date, " at 00:00:00 UTC") }}
        {{ render_field_in_row(form.end_date, " at 23:59:59 UTC") }}
        {{ render_field_in_row(form.number_elected) }}
        {{ render_field_in_row(form.candidates_are_fasusers) }}
        {{ render_field_in_row(form.frontpage) }}
        {{ render_field_in_row(form.embargoed) }}
      </table>
    </fieldset>
    <div class="help">
      This is the name of the election that users will first see.</br>
      Example: <kbd>Fedora Board, November 2010</kbd>
    </div>
    <fieldset>
      {{ render_field(form.alias) }}
    </fieldset>
    <div class="help">
      A short, unique name that will be used for the election's URL.</br>
      Lowercase letters, numbers, hyphens and underscores only.</br>
      Example: <kbd>boardf15</kbd>
    </div>
    <fieldset>
      {{ render_field(form.description) }}
    </fieldset>
    <fieldset>
      <div class="row">
        {{ form.voting_type.label }}
        {% for subtype in form.voting_type %}
          {{ subtype }} {{ subtype.label }}
        {% endfor %}
      </div>
    </fieldset>
    <div class="help">
      Select the election type.
    </div>
    <fieldset>
      {{ render_field(form.url) }}
    </fieldset>
    <fieldset>
      {{ render_field(form.start_date, " at 00:00:00 UTC") }}
      {{ render_field(form.end_date, " at 23:59:59 UTC") }}
    </fieldset>
    <div class="help">
      Enter dates in <kbd>YYYY-MM-DD</kbd> format.
    </div>
    <fieldset>
      {{ render_field(form.number_elected) }}
    </fieldset>
    <div class="help">
      This determines the cutoff for how many candidates win the election.
      For example, if you are electing four empty seats on a committee,
      enter <kbd>4</kbd> here.
    </div>
    <fieldset>
      {{ render_field(form.candidates_are_fasusers) }}
    </fieldset>
    <div class="help">
      Check this if every candidate in this election has a FAS user account.
      This will automatically pull full names and wiki page URLs from FAS.
    </div>
    <fieldset>
      {{ render_field(form.frontpage) }}
    </fieldset>
    <fieldset>
      {{ render_field(form.embargoed) }}
    </fieldset>
    <div class="help">
      Embargo results when the election is finished. To unembargo them, edit
      the election and uncheck this box.
    </div>

    <br class="clear">
    <p class="buttons">
      <input type="submit" class="submit positive" value="Save Changes">
    </p>
    {{ form.csrf_token }}
  </form>
{% endblock %}

{% block jscripts %}
{{ super() }}
<script type="text/javascript" src="{{ url_for('static', filename='jquery-1.10.2.min.js') }}"> </script>
<script type="text/javascript" src="{{ url_for('static', filename='jquery-ui-1.9.2.custom.min.js') }}"> </script>

<script type="text/javascript">
    $(function(){
        $('#start_date').datepicker({
            dateFormat: "yy-mm-dd",
        });
        $('#end_date').datepicker({
            dateFormat: "yy-mm-dd",
        });
    });
</script>
{% endblock %}
